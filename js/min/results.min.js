$(document).ready(function(){function t(){p||($(".loading-wrapper.searching").addClass("active"),$.get(phpVars.fetchResultsPath,function(a){if(!p){var s=$.parseJSON(a);$(".results-wrapper tbody .added").removeClass("added"),s.data?($.each(s.data,function(t,e){if(!p){l++;var r=e[0];r=r.replace(/\bhref=\"([^"]+)\"/,'href="#tv-'+l+'" data-tv-url="$1"'),$(".results-wrapper tbody").append('<tr class="added"><td>'+r+"</td><td>"+e[1]+"</td></tr>")}}),$(".results-wrapper").fadeIn("fast"),resultIDString=e(l),$(".count strong").text(resultIDString),i||setTimeout(t,150)):($(".loading-wrapper.searching").removeClass("active"),$(".results-wrapper tbody .added").removeClass("added"),$(".messages").addClass("active"),s.error?($(".controls").remove(),$(".error p").text("Error! "+s.error_msg),$(".error").addClass("active")):0==$(".results-wrapper tbody").children().length?($(".controls").remove(),$(".error p").text("No results found!"),$(".error").addClass("active")):($(".notice p").text("All results have been found!"),$(".controls").find("button:not([name='to-top']), input").prop("disabled",!0),$(".controls").find("label").addClass("disabled"),$(".notice").addClass("active"),$(".count strong + span").text($(".count strong").text())),p=!0,$(".stop").click(),o&&o.abort())}(l=10)&&r()}))}function e(t){return t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function r(){o=$.ajax({url:phpVars.getAllResultsPath,success:function(t){var r=$.parseJSON(t);if($(".results-wrapper tbody .added").removeClass("added"),p=!0,r.data){var a=0;$(".results-wrapper tbody").empty(),$(".loading-wrapper.searching").removeClass("active"),$(".messages").addClass("active"),$.each(r.data,function(t,e){a++;var r=e[0];r=r.replace(/\bhref=\"([^"]+)\"/,'href="#tv-'+a+'" data-tv-url="$1"'),$(".results-wrapper tbody").append("<tr><td>"+r+"</td><td>"+e[1]+"</td></tr>")}),$(".results-wrapper").fadeIn("fast"),resultIDString=e(a),$(".count strong + span, .count strong").text(resultIDString),$(".notice p").text("All results have been found!"),$(".controls").find("button:not([name='to-top']), input").prop("disabled",!0),$(".controls").find("label").addClass("disabled"),$(".notice").addClass("active")}else $(".loading-wrapper.searching").removeClass("active"),$(".messages").addClass("active"),r.error?($(".controls").remove(),$(".error p").text("Error! "+r.error_msg),$(".error").addClass("active")):0==$(".results-wrapper tbody").children().length&&($(".controls").remove(),$(".error p").text("No results found!"),$(".error").addClass("active"))}})}function a(){h.hasClass("scroll")||(v=h[0].getBoundingClientRect().top+h.scrollTop(),f=h[0].getBoundingClientRect().height,g.height(f))}function s(){var t=$(window);t.scrollTop()>=v?(g.addClass("active"),h.addClass("scroll")):(g.removeClass("active"),h.removeClass("scroll"))}var o,n=window.location.hash,d=$("a.tv-show-fs"),l=0,i=!1,c=$('[name="continue-bg"]'),p=!1;if(t(),n&&1==n.indexOf("tv-")){var u=n.match(/\d+$/);d.eq(u[0]-1).click()}$.get(phpVars.fetchCountsPath,function(t){t&&!p&&(t=e(t),$(".count strong + span").text(t))}),$(".stop").click(function(){i||(i=!0,$(".loading-wrapper.searching").removeClass("active"),$(this).prop("disabled",!0),$(".continue").prop("disabled",p))}),$(".continue").click(function(){i&&!p&&(i=!1,$(".stop").prop("disabled",!1),$(this).prop("disabled",!0),t())}),$(".results-wrapper tbody").on("click","a.tv-show-fs",function(t){var e=$(this);$(".loading-wrapper.tv").addClass("active"),window.history.replaceState("",document.title,window.location.pathname+e.attr("href")),body.treeVisualizer(e.data("tv-url"),{normalView:!1,initFSOnClick:!0}),t.preventDefault()}),$("[name='to-top']").click(function(){$("html, body").animate({scrollTop:0})});var h=$(".controls"),v=h[0].getBoundingClientRect().top+h.scrollTop(),f=h[0].getBoundingClientRect().height,g=$(".dummy-controls");g.height(f),$(window).resize($.throttle(250,a)),$(window).scroll($.throttle(250,s)),$(window).focus(function(){c.is(":checked")||$(".continue").click()}).blur(function(){c.is(":checked")||$(".stop").click()})});
