$(function(){function e(){var t="edit-warning";if(0==$("."+t).length){"<small>You can re-enable all options and reset XPath to the last unmodified structure by pressing the button <em>Reset XPath</em></small>",function(t,e,a){var i=1;for(;;){if(!$("[data-popup-id='"+i+"'").length){var n=document.createElement("aside");$(n).html(t).attr({"data-popup-id":i,class:"popup"}).hide().appendTo("#popup-wrapper"),$(n).append('<div class="btn-wrapper"><button title="Continue editing XPath" type="button" class="continue">Continue</button></div>'),e&&$(n).children(".btn-wrapper").prepend('<button title="Close this pop-up" type="button" class="cancel">Cancel</button>'),a&&$(n).addClass(a);break}i++}if(0==$("#popup-overlay").length){var o=document.createElement("div");$(o).attr("id","popup-overlay").hide().appendTo("#popup-wrapper")}}("<p>Editing the XPath will disable all options except for the option to add sentence IDs, as well as disable the selection table and the tree representation.</p><p><strong>Only edit this code if you know what you are doing!</strong></p><small>You can re-enable all options and reset XPath to the last unmodified structure by pressing the button <em>Reset XPath</em></small>",!0,t)}var e=$("."+t),a=e.data("popup-id");Cookies.get("popup-continue-"+a)?($(".input-wrapper, .xpath-wrapper > div:first-child, #tree-output, .guidelines").addClass("advanced-mode-active").find(":not(.disabled) > input, :not(.disabled) > button").not("[name='sentids']").prop("disabled",!0),$('[name="manualMode"]').val("true"),$(".continue-btn-wrapper [type='submit']").prop("disabled",!1),$(".xpath-wrapper textarea").off("mousedown")):(!function(t,e){t.css({visibility:"hidden",display:"block"});var a=c.width(),i=c.height(),n=e[0].getBoundingClientRect(),o=e.offset(),s=a-n.right,p=i-n.bottom,r=t[0].getBoundingClientRect(),l=(n.width-r.width)/2,d=(n.height-r.height)/2;t.removeClass("hang-right hang-left hang-bottom hang-top"),n.top>r.height+16&&s>r.width/2&&n.left>r.width/2?(t.addClass("hang-top"),t.css({left:o.left+l,top:o.top-r.height-16})):n.left>r.width+16&&n.top>r.height/2&&p>r.height/2?(t.addClass("hang-left"),t.css({left:o.left-r.width-16,top:o.top+d})):s>r.width+16&&n.top>r.height/2&&p>r.height/2?(t.addClass("hang-right"),t.css({left:o.left+n.width+16,top:o.top+d})):(t.addClass("hang-bottom"),t.css({left:o.left+l,top:o.top+n.height+16}));t.css("visibility","visible"),$("#popup-overlay").show()}(e,$("#xpath")),e.find("button.continue").click(function(){$(".input-wrapper, .xpath-wrapper > div:first-child, #tree-output, .guidelines").addClass("advanced-mode-active").find(":not(.disabled) > input, :not(.disabled) > button").not("[name='sentids']").prop("disabled",!0),$('[name="manualMode"]').val("true"),$(".continue-btn-wrapper [type='submit']").prop("disabled",!1),$(".xpath-wrapper textarea").off("mousedown")}))}function a(){$("body:not(.treebanks) .help-tooltip[data-title]").each(function(t,e){var a=$(e),i=e.getBoundingClientRect(),n=c.width(),o=c.height();a.addClass("hang-right hang-left hang-bottom hang-top"),(n-i.right<=320||i.top<=160||o-i.bottom<=160)&&a.removeClass("hang-right"),(i.left<=320||i.top<=160||o-i.bottom<=160)&&a.removeClass("hang-left"),(o-i.bottom<=320||n-i.right<=160||i.left<=160)&&a.removeClass("hang-bottom"),(i.top<=320||n-i.right<=160||i.left<=160)&&a.removeClass("hang-top")})}function t(){d&&d.abort(),$(".continue-btn-wrapper [type='submit']").prop("disabled",!0),d=$.ajax({url:getTreePathScript,method:"POST",data:$("main form").serialize(),timeout:5e3}).done(function(t){var e=$.parseJSON(t);e.location&&e.xpath&&($("#tree-output").treeVisualizer(e.location,{extendedPOS:!0}),$("#xpath, .xpath-wrapper input[name='originalXp']").val(e.xpath),i($("#xpath")),$(".continue-btn-wrapper [type='submit']").prop("disabled",!1))}).fail(function(t,e,a){"abort"!=a&&alert("Error getting your request. If this persists, contact us.")})}function i(t){t.height(0).outerHeight(t[0].scrollHeight+2)}function n(){for(var t,e=[],a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<a.length;i++)t=a[i].split("="),e.push(t[0]),e[t[0]]=t[1];return e}var o=$("body"),s=$(".primary-navigation"),c=$(window),p=$(document);if($("#old-ie-script").remove(),c.resize($.throttle(500,function(){c.width()<721?(s.addClass("small"),s.find("button").addClass("active")):(s.removeClass("active small"),s.find("button").removeClass("active")),a()})).resize(),c.scroll($.throttle(700,a)).scroll(),$("#popup-wrapper").on("click","button.cancel, button.continue",function(){var t=$(this),e=t.closest(".popup"),a=e.data("popup-id");t.hasClass("continue")&&Cookies.set("popup-continue-"+a,"true"),e.fadeOut("fast"),$("#popup-overlay").hide()}),$("[data-collapse-btn]").wrap('<a href="#" class="collapse" data-collapse="visible" title="Show or hide this section" />').after('<span class="btn-wrapper"><i class="fa fa-fw fa-angle-up" aria-hidden="true"></i><span class="sr-only">Show or hide this section</span></span>'),$("[name='to-top']").click(function(){$("html, body").animate({scrollTop:0})}),$('a[href^="#"]').click(function(t){$(this).is('[href^="#"]')&&(document.location.hash=$(this).attr("href").substring(1),t.preventDefault())}),$("a.collapse").off().click(function(t){var e=$(this);"hidden"==e.attr("data-collapse")?(e.attr("data-collapse","visible"),e.next("[data-collapse-target]").show()):(e.attr("data-collapse","hidden"),e.next("[data-collapse-target]").hide()),t.preventDefault()}),$("body.docs a.collapse").click(),o.hasClass("docs")&&window.location.hash&&$(window.location.hash).parent("a").click(),$("body.matrix .xpath-wrapper a, body.xps.input .open-beautifier-wrapper a").click(function(t){t.preventDefault();var e,a,i=$(this).attr("href");e=$("#xpath").serialize(),a=i,$.ajax({type:"POST",url:"https://bramvanroy.be/projects/xpath-beautifier/php/receive-post.php",crossDomain:!0,data:e,headers:{"cache-control":"no-cache"},xhrFields:{withCredentials:!0}}).done(function(t){}).fail(function(t,e,a){}).always(function(){var t=window.open(a,"_blank");t?t.focus():alert("Your browser blocked opening a new window. Please allow pop-ups for this website. We will never show advertisements.")})}),s.find("button").click(function(){s.toggleClass("active")}),p.click(function(t){s.hasClass("active")&&($(t.target).closest(s.find("button"),s.find("ul")).length||s.removeClass("active"))}),o.hasClass("input")){var r=$("[name='clear']");if(r.click(function(t){var e=$(this);e.prev("[name='input'], textarea").val("").addClass("no-content").focus(),e.prop("disabled",!0),t.preventDefault()}),$("[name='input'], textarea").keyup(function(){var t=$(this);t.val()?(t.removeClass("no-content"),r.prop("disabled",!1)):(t.addClass("no-content"),r.prop("disabled",!0))}).keyup(),o.hasClass("ebs")&&(Cookies.get("ebs-input")&&$("[name='input']").val(Cookies.get("ebs-input")).change(),$("[type='submit']").click(function(){Cookies.set("ebs-input",$("[name='input']").val(),{expires:7,path:""})})),function(){if(n().tpinput){var t=decodeURIComponent(n().tpinput);$(".input.ebs input").val(t),$(".input.xps textarea[name=xpath]").val(t)}}(),o.hasClass("xps")){var l=$("[name='xpath']");Cookies.get("xps-input")&&l.val(Cookies.get("xps-input")).change(),$("[type='submit']").click(function(){var t=(l.val().match(/\[/g)||"").length,e=(l.val().match(/\]/g)||"").length;t==e?(l[0].setCustomValidity(""),Cookies.set("xps-input",l.val(),{expires:7,path:""})):(e<t&&l[0].setCustomValidity("Fix XPath inconsistency: missing ] or unnecessary [ (x"+(t-e)+")"),t<e&&l[0].setCustomValidity("Fix XPath inconsistency: missing [ or unnecessary ] (x"+(e-t)+")"))}),l.keyup(function(){this.setCustomValidity("")})}}else if(o.hasClass("matrix")){var d;l=$("[name='xpath']");$("[type='submit']").click(function(){var t=(l.val().match(/\[/g)||"").length,e=(l.val().match(/\]/g)||"").length;t==e?l[0].setCustomValidity(""):(e<t&&l[0].setCustomValidity("Fix XPath inconsistency: missing ] or unnecessary [ (x"+(t-e)+")"),t<e&&l[0].setCustomValidity("Fix XPath inconsistency: missing [ or unnecessary ] (x"+(e-t)+")"))}),l.keyup(function(){this.setCustomValidity("")}),t(),$("main form input[type='radio'], main form input[type='checkbox']:not([name='ct']):not([name='sentids'])").change(function(){t()}),$("form").submit(t()),$("tbody td").click(function(){$(this).find("input").click()}).find("input").click(function(t){t.stopPropagation()}),$(".table-wrapper .case-sensitive input[type='checkbox']").each(function(t,e){var a=$(e);a.is(":checked")&&a.prop("disabled",!1).parent("td:not(.punctuation)").removeClass("disabled")}),$(".table-wrapper input[type='radio']").click(function(){var t=$(this),e=t.parent("td:not(.punctuation)"),a=$(".table-wrapper .case-sensitive td:nth-child("+(e.index()+1)+")");e.length&&("token"==t.val()?a.removeClass("disabled").children("input[type='checkbox']").prop("disabled",!1):a.addClass("disabled").children("input[type='checkbox']").prop("checked",!1).prop("disabled",!0))});var h=$(".advanced-btn-wrapper button"),u=$(".table-wrapper tr.advanced-option");h.click(function(){var t;$(".advanced-option:not(tr)").toggle(),u.toggleClass("visible-row"),u.hasClass("visible-row")?(t="Hide advanced options",i($("#xpath")),a()):t="Show advanced options",h.attr("title",t).children("span").text(t)}),$(".xpath-wrapper input[type='reset']").click(function(t){t.preventDefault(),$("#xpath").val($(".xpath-wrapper input[name='originalXp']").val()).change(),$(".input-wrapper, .xpath-wrapper > div:first-child, #tree-output, .guidelines").removeClass("advanced-mode-active").find(":not(.disabled) > input, :not(.disabled) > button").prop("disabled",!1),$('[name="manualMode"]').val("false"),$(".xpath-wrapper textarea").on("mousedown",e)}),$(".xpath-wrapper textarea").on("mousedown",e)}else o.hasClass("treebanks")&&($("[type='radio']").change(function(){var t=$(this),e=t.val();t.is("[name='treebank']")&&($(".corpora-wrapper > div").hide().removeClass("active"),$(".corpora-wrapper > div").find("[type='checkbox'], [type='radio']").prop("disabled",!0),$("."+e).show().addClass("active").find("label:not(.disabled)").find("[type='checkbox'], [type='radio']").prop("disabled",!1),"false"===t.data("multioption")&&0==$("."+e+" [type='checkbox']:checked").length?$(".continue-btn-wrapper [type='submit']").prop("disabled",!0):$(".continue-btn-wrapper [type='submit']").prop("disabled",!1))}),$("[type='checkbox']").change(function(){var t=$(this),e=t.closest(".table-wrapper");if(this.setCustomValidity(""),t.is("[data-check^='all']")){var a=t.prop("checked"),i=t.attr("data-check");a?$(".continue-btn-wrapper [type='submit']").prop("disabled",!1):$(".continue-btn-wrapper [type='submit']").prop("disabled",!0),e.find("label:not(.disabled) [data-check-all='"+i+"']").prop("checked",a)}else if(t.is("[name='subtreebank[]']")){var n=t.attr("data-treebank"),o=t.val(),s=e.find("[data-check='"+t.attr("data-check-all")+"']"),p=o.substring(0,1),r=e.find("[name='subtreebank[]']"),l="cgn"==n?"[value^='"+p+"']":"",d=r.filter(l+":not(:disabled)");d.length==d.filter(":checked").length?(s.prop("indeterminate",!1),s.prop("checked",!0)):0==r.filter(l+":checked").length?(s.prop("indeterminate",!1),s.prop("checked",!1)):s.prop("indeterminate",!0)}0<$("div.active .table-wrapper [type='checkbox']:checked").length?$(".continue-btn-wrapper [type='submit']").prop("disabled",!1):$(".continue-btn-wrapper [type='submit']").prop("disabled",!0)}),0==$("[type='radio'][name='treebank']:checked").length?$("[type='radio'][name='treebank'][value='lassy']").click().change():$("[type='radio'][name='treebank']:checked").click().change())});